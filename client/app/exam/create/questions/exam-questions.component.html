<div class="container panel">
    <h2>Defining exam question {{questionForm.value.id}} {{questionForm.value.text}} </h2>
    <form [formGroup]="questionForm" novalidate>

        <div class="form-group">
            <label>Seqence number</label>
            <input type="number" min="1" class="form-control" formControlName="seqenceNumber">
        </div>

        <div class="form-group">
            <label>Qestion</label>
            <input type="text" class="form-control" formControlName="text">
        </div>

        <div class="form-group">
            <label>Parent question</label>
            <select formControlName="parentQestionID" class="form-control">
                <option *ngFor="let item of questions" [value]="item.id" >{{ item.text }}</option>
            </select>
        </div>

        <div formArrayName="arguments" class="container panel" style="background-color: lavender ">
            <question-argument [group]="questionForm.controls.arguments" [exam]="currentExam" [qestionid]="questionForm.value.id"></question-argument>
        </div>

        <div class="form-group">
            <label>Topics</label>
            <select multiple name="topics" class="form-control " [(ngModel)]="questionForm.value.topicIDs" [ngModelOptions]="{standalone: true}">
                <option *ngFor="let qtopic of currentCourse.topics" [value]="qtopic.id">  {{qtopic.name }} </option>
            </select>
        </div>
        <!--<question-topics [group]="questionForm.controls.topicIDs" [course]="currentCourse"></question-topics>-->

        <div class="btn-group pull-right margin-20" role="group">
            <button type="button" class="form-control" class="btn btn-success" (click)="save(questionForm.value.id)">
                Save
            </button>
            <button type="button" class="form-control" class="btn btn-danger" (click)="cancel()">
                Cancel 
            </button>

        </div>

    </form>
</div>

<div class="container">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Seqence</th>
                <th>Questions</th>
                <th class="pull-right">Options</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let question of questions; let i=index">
                <td>{{question.seqenceNumber}} </td>
                <td>{{question.text}} </td>
                <td>
                    <div class="btn-group pull-right" role="group">
                        <button type="button" class="form-control" class="btn btn-primary " (click)="edit(i)">
                                    Edit
                                </button>
                        <button type="button" class="form-control" class="btn btn-danger " *ngIf="questions.length > 1" (click)="removeQuestion(i)">
                                    Remove 
                                </button>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="margin-20">
    <button type="button" class="btn btn-success" (click)="addQuestion()">
        Add another question +
    </button>
</div>

<div class="form-group pull-right margin-20">
    <button class="btn btn-primary" [routerLink]="['/exam/create/1/evaluator']" >Next</button>

    <a [routerLink]="['/exam']" class="btn btn-link">Cancel</a>
</div>

<div class="clearfix"></div>

<div class="container">
    <div>Form</div>
    <pre>Qestion form value: <br>{{questionForm.value | json}}</pre>
    <pre>Questions value: <br>{{questions | json}}</pre>
    <pre>Course value: <br>{{currentCourse | json}}</pre>
</div>